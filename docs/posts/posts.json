[
  {
    "path": "posts/2022-05-16-the-world-happiness-report-2022/",
    "title": "The World Happiness Report 2022",
    "description": "Second series in exploratory data visualizations on World Happiness Report 2022 using the {leaflet} packages in R.",
    "author": [
      {
        "name": "Jewel Johnson",
        "url": "https://jeweljohnsonj.github.io/jeweljohnson.github.io/"
      }
    ],
    "date": "2022-05-16",
    "categories": [
      "worldmap",
      "leaflet",
      "sf"
    ],
    "contents": "\n\nContents\nGetting the\ndata\nPlotting an interactive world\nmap\nSummary\nReferences\nLast updated\non\n\n\n\n\nGetting the data\nSimilar to the previous\npost we will plot an interactive map using the\n{leaflet} package in R with the world happiness report data\n2022.\nWith the effects of COVID-19 finally getting subdued via mass\nvaccination drives and other precautionary measures taken by the\ngovernments around the world, the happiness data of 2022 shows light on\nhow different countries are doing in the recovery stage.\nLike last time, Finland is again ranked first among 149 countries\nwith an overall score of 7.82 and Afghanistan ranked the last with a\nscore of 2.40.\nPlotting an interactive world\nmap\nLets plot an interactive world map with happiness score as a\nvariable, where greater scores indicates happier countries and vice\nversa. We will be using the {leaflet} package in R for\nplotting the world map.\nFirst lets download and import the data into R. You can download the\n.csv file using this link.\nThen we have to download the world map data which comes as a\n.shp file.\nRun the codes given below to download the .shp file and\nload the .csv file required to plot the map. I will be\nreusing the codes from the previous\npost. For0 plotting the interactive map, we will be using the\n{sf} package for reading the .shp file and the\n{leaflet} package for plotting the map.\n\n\nlibrary(readr)\nlibrary(dplyr)\n\n# loading the .csv file which was downloaded\n# please change the location to where your .csv file is kept\nhap_pre <- read.csv(\"/home/jeweljohnson/Work/datasets/2022.csv\")\n\n# renaming column names of ease of use\ncolnames(hap_pre)[1] <- \"rank\"\ncolnames(hap_pre)[2] <- \"country\"\ncolnames(hap_pre)[3] <- \"score\"\nhap_pre <- hap_pre[-147,]\n\n# the score values are separated by commas\n# let us change that to dots\nhap_pre$score <- scan(text=hap_pre$score, dec=\",\", sep=\".\")\n\n# selecting country and score columns\nhap <- hap_pre %>% select(rank,country,score)\n\n# downloading and loading the .shp file\n# please change the 'destfile' location to where your zip file is located\ndownload.file(\"http://thematicmapping.org/downloads/TM_WORLD_BORDERS_SIMPL-0.3.zip\" , destfile=\"shp/world_shape_file.zip\")\n\n# unzip the file into a directory. You can do it with R (as below).\n# the directory of my choice was folder named 'shp'\nunzip(\"shp/world_shape_file.zip\", exdir = \"shp/\")\n\n# Read the shape file with 'sf'\n#install.packages(\"sf\")\nlibrary(sf)\nworld_spdf <- st_read(paste0(getwd(),\"/shp/TM_WORLD_BORDERS_SIMPL-0.3.shp\"), stringsAsFactors = FALSE)\n\n\nReading layer `TM_WORLD_BORDERS_SIMPL-0.3' from data source \n  `/home/jeweljohnson/Work/R_distill_github/jeweljohnson.github.io/_posts/2022-05-16-the-world-happiness-report-2022/shp/TM_WORLD_BORDERS_SIMPL-0.3.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 246 features and 11 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -180 ymin: -90 xmax: 180 ymax: 83.57027\nGeodetic CRS:  WGS 84\n\n# checking which country names are a mismatch between map data and the downloaded dataset\n# this is an important check as we have to join the happiness dataset and .shp file with country names\nanti_join(hap, world_spdf,  by = c(\"country\" = \"NAME\"))\n\n\n   rank                   country score\n1     6               Luxembourg* 7.404\n2    18                   Czechia 6.920\n3    26  Taiwan Province of China 6.512\n4    32                    Kosovo 6.455\n5    39                Guatemala* 6.262\n6    50                   Kuwait* 6.106\n7    59               South Korea 5.935\n8    62                   Moldova 5.857\n9    65                  Belarus* 5.821\n10   77                   Vietnam 5.485\n11   78             Turkmenistan* 5.474\n12   79             North Cyprus* 5.467\n13   81 Hong Kong S.A.R. of China 5.425\n14   86                    Libya* 5.330\n15   88               Ivory Coast 5.235\n16   89           North Macedonia 5.199\n17   92               Azerbaijan* 5.173\n18   93                   Gambia* 5.164\n19   95                      Laos 5.140\n20   97                  Liberia* 5.122\n21  104                    Niger* 5.003\n22  110                      Iran 4.888\n23  116                  Comoros* 4.609\n24  122  Palestinian Territories* 4.483\n25  125     Eswatini, Kingdom of* 4.396\n26  126                   Myanmar 4.394\n27  128               Madagascar* 4.339\n28  130                     Chad* 4.251\n29  132                    Yemen* 4.197\n30  133               Mauritania* 4.153\n31  139                  Tanzania 3.702\n32  141                  Lesotho* 3.512\n33  142                 Botswana* 3.471\n34  143                   Rwanda* 3.268\n\n# correcting country names, note that some countries are not available in the .shp file\n\ncorrect_names <- c(\"Luxembourg*\" = \"Luxembourg\",\n                   \"Czechia\" = \"Czech Republic\",\n                   \"Taiwan Province of China\" = \"Taiwan\",\n                   \"Guatemala*\" = \"Guatemala\",\n                   \"Kuwait*\" = \"Kuwait\",\n                   \"South Korea\" = \"Korea, Republic of\",\n                   \"Moldova\"  = \"Republic of Moldova\",\n                   \"Belarus*\" = \"Belarus\",\n                   \"Vietnam\" = \"Viet Nam\",\n                   \"Turkmenistan*\" = \"Turkmenistan\",\n                   \"Hong Kong S.A.R. of China\"= \"Hong Kong\",\n                   \"Libya*\" = \"Libyan Arab Jamahiriya\",\n                   \"Ivory Coast\" = \"Cote d'Ivoire\",\n                   \"North Macedonia\" = \"The former Yugoslav Republic of Macedonia\",\n                   \"Azerbaijan*\" = \"Azerbaijan\",\n                   \"Gambia*\" = \"Gambia\",\n                   \"Liberia*\" = \"Liberia\",\n                   \"Laos\" = \"Lao People's Democratic Republic\",\n                   \"Niger*\" = \"Niger\",\n                   \"Iran\" = \"Iran (Islamic Republic of)\",\n                   \"Comoros*\" = \"Comoros\",\n                   \"Palestinian Territories*\" = \"Palestine\",\n                   \"Eswatini, Kingdom of*\" = \"Swaziland\",\n                   \"Myanmar\" = \"Burma\",\n                   \"Madagascar*\" = \"Madagascar\",\n                   \"Chad*\" = \"Chad\",\n                   \"Yemen*\" = \"Yemen\",\n                   \"Mauritania*\" = \"Mauritania\",\n                   \"Tanzania\" = \"United Republic of Tanzania\",\n                   \"Lesotho*\" = \"Lesotho\",\n                   \"Botswana*\" = \"Botswana\",\n                   \"Rwanda*\" = \"Rwanda\")\n\n# recoding country names \nhap2 <- hap %>% mutate(country = recode(country, !!!correct_names))\n\n# joining .shp file and the happiness data\nworld_hap <-  left_join(world_spdf, hap2, by = c(\"NAME\" = \"country\"))\n\n#install.packages(\"leaflet\")\nlibrary(leaflet)\nlibrary(viridis)\n\n# making colour palette for filling\nfill_col <- colorNumeric(palette=\"magma\", domain=world_hap$score, na.color=\"transparent\")\n\n# Prepare the text for tooltips:\ntext <- paste(\n  \"Country: \", world_hap$NAME,\"<br/>\", \n  \"Score: \", world_hap$score, \"<br/>\", \n  \"Rank: \", world_hap$rank, \n  sep=\"\") %>%\n  lapply(htmltools::HTML)\n\n# plotting interactive map\nleaflet(world_hap) %>% \n  addTiles()  %>% \n  setView( lat=10, lng=0 , zoom=2) %>%\n  addPolygons( \n    fillColor = ~fill_col(score), \n    stroke=TRUE, \n    fillOpacity = 0.9, \n    color= \"grey\", \n    weight=0.3,\n    label = text,\n    labelOptions = labelOptions( \n      style = list(\"font-weight\" = \"normal\", padding = \"3px 8px\"), \n      textsize = \"13px\", \n      direction = \"auto\"\n    )\n  ) %>%\n  addLegend( pal=fill_col, values=~score, opacity=0.7, title = \"Score\", position = \"bottomleft\" )\n\n\n\n\nSummary\nIn continuation with my previous\npost, this post showcases an interactive map for the latest\nhappiness index data for 2022.\nReferences\nH. Wickham. ggplot2: Elegant Graphics for Data Analysis.\nSpringer-Verlag New York, 2016.\nJoe Cheng, Bhaskar Karambelkar and Yihui Xie (2021). leaflet:\nCreate Interactive Web Maps with the JavaScript ‘Leaflet’ Library. R\npackage version 2.0.4.1. https://CRAN.R-project.org/package=leaflet\nPebesma, E., 2018. Simple Features for R: Standardized Support\nfor Spatial Vector Data. The R Journal 10 (1), 439-446, https://doi.org/10.32614/RJ-2018-009\nTutorial\non plotting interactive maps in R.\nThe World\nHappiness Report 2022\nSource\nfor .csv file of World Happiness Score of countries 2022.\nCompiled by Mathurin Aché in Kaggle.com\nLast updated on\n\n[1] \"2022-05-17 18:14:32 IST\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "preview": "posts/2022-05-16-the-world-happiness-report-2022/map.png",
    "last_modified": "2022-05-18T16:55:34+05:30",
    "input_file": {},
    "preview_width": 710,
    "preview_height": 497
  },
  {
    "path": "posts/2022-01-17-the-world-happiness-report-2021/",
    "title": "The World Happiness Report 2021",
    "description": "Exploratory data visualizations on World Happiness Report 2021. Learn to plot world map and interative world map using {ggplot2}, {sf} and {leaflet} packages in R and correlalogram using the {ggstatsplot} package.",
    "author": [
      {
        "name": "Jewel Johnson",
        "url": "https://jeweljohnsonj.github.io/jeweljohnson.github.io/"
      }
    ],
    "date": "2022-01-17",
    "categories": [
      "worldmap",
      "leaflet",
      "sf",
      "ggstatsplot"
    ],
    "contents": "\n\nContents\nGetting the data\nPlotting a world map\nPlotting an interactive world map\nPlotting a correlogram\nSummary\nReferences\nLast updated on\n\n\n\n\nGetting the data\nIn this post we will do some exploratory data visualizations using data from The World Happiness Report 2021. You can download the .csv file from here.\nWorld Happiness Report 2021 shows which are the happiest countries in the year 2021. By statistically analysing six key parameters, each country is given a score (which is called ‘Ladder score’ within the dataset). The higher the score, the happier the country is and vice versa. The six key parameters which are taken into analysis for determining the score are;\nGross domestic product per capita\nSocial support\nHealthy life expectancy\nFreedom to make your own life choices\nGenerosity of the general population\nPerceptions of internal and external corruption levels.\nFinland is ranked first among 149 countries with an overall score of 7.84. Despite COVID 19 wrecking havoc around the world, citizens of Finland have persevered through it and they have been maintaining first rank since 2016. Afghanistan is at the lowest rank with a score of 2.52. With complications from COVID 19 pandemic and the Taliban take over, Afghanistan is going through one of the worst humanitarian crisis in human history and this ranking is a result of that.\nPlotting a world map\nWe will plot a world map with a scalable colour palette based on the ladder score where greater scores indicated happier countries and vice versa.\n\n\n# Load and install necessary packages\nlibrary(readr)\nlibrary(tidyverse)\n#install.packages(\"viridis\")\nlibrary(viridis)\n\n\n\nIn short what we are doing is, we are going to join the World Happiness Report 2021 dataset with the map data and plot it using the {ggplot2} package. The map_data() function helps us easily turn data from the {maps} package in to a data frame suitable for plotting with ggplot2.\n\n\n# load the dataset which you have downloaded\n# please change the location to where your downloaded file is kept\nhap_pre <- read.csv(\"/home/jeweljohnson/Work/datasets/world-happiness-report-2021.csv\")\n\n# renaming column names of ease of use\ncolnames(hap_pre)[1] <- \"country\"\ncolnames(hap_pre)[3] <- \"score\"\n\n# selecting country and score columns\nhap <- hap_pre %>% select(country,score)\n\n# loading map\nmap_world <- map_data('world')\n# remove Antarctica\nmap_world <- map_world[!map_world$region ==\"Antarctica\",]\n\n# checking which country names are a mismatch between map data and the downloaded dataset\nanti_join(hap, map_world,  by = c(\"country\" = \"region\"))\n\n\n                    country score\n1            United Kingdom 7.064\n2             United States 6.951\n3  Taiwan Province of China 6.584\n4              North Cyprus 5.536\n5 Hong Kong S.A.R. of China 5.477\n6       Congo (Brazzaville) 5.342\n7   Palestinian Territories 4.517\n\n# display all country names in the dataset\n# useful to locate correct country names\n#map_world %>% group_by(region) %>% summarise() %>% print(n = Inf)\n\n# correcting country names\n# here we are matching the country names of downloaded dataset with the map data\ncorrect_names <- c(\"United Kingdom\" = \"UK\",\n                   \"United States\" = \"USA\",\n                   \"Taiwan Province of China\"  = \"Taiwan\",\n                   \"North Cyprus\"= \"Cyprus\",\n                   \"Congo (Brazzaville)\"= \"Republic of Congo\",\n                   \"Palestinian Territories\" = \"Palestine\")\n\n# recoding country names \nhap2 <- hap %>% mutate(country = recode(country, !!!correct_names))\n\n# joining map and the data\nworld_hap <- left_join(map_world, hap2, by = c(\"region\" = \"country\"))\n\n# creating a function to add line in text, for the caption\naddline_format <- function(x,...){\n  gsub(',','\\n',x)}\n\n# plotting the world map\nggplot(world_hap, aes(long, lat)) + geom_polygon(aes(fill = score, group = group)) +\n  scale_fill_viridis(option = \"viridis\") + theme_void() +\n  theme(plot.background = element_rect(fill = \"aliceblue\"),\n        legend.position=\"bottom\") + \n  labs(title = \"Happiness scores of countries in 2021\",\n       subtitle = addline_format(\"Higher scores indicate happier countries and vice versa,Grey colour represents countries with no data\"),\n       fill = \"Score\",\n       caption = addline_format(\"Source: World Happiness Report 2021,Visualization by Jewel Johnson\"))\n\n\n\n\nPlotting an interactive world map\nRather than a static plot let us try to plot an interactive map using the {leaflet} package in R. Most of the steps I followed was from here. Instead of {rgdal} I will be using {sf} package as the former is retiring in the future.\n\n\n# Download the zip file containing shape file. A .shp file is a vector storage format for geographic location\n# Please change the 'destfile' location to where your zip file is downloaded\ndownload.file(\"http://thematicmapping.org/downloads/TM_WORLD_BORDERS_SIMPL-0.3.zip\" , destfile=\"shp/world_shape_file.zip\")\n# You now have it in your current working directory. Mine I placed it in a sub folder called 'shp' in my working directory\n\n# Unzip this file into shp directory. You can do it with R (as below).\nunzip(\"shp/world_shape_file.zip\", exdir = \"shp/\")\n# Your .shp file is this --> TM_WORLD_BORDERS_SIMPL-0.3.shp\n\n\n\nNow let us plot the interactive map.\n\n\n# Read this shape file with the sf library.\n# since {rgdal} is retiring I am using {sf}\n\n#install.packages(\"sf\")\nlibrary(sf)\nworld_spdf <- st_read(paste0(getwd(),\"/shp/TM_WORLD_BORDERS_SIMPL-0.3.shp\"), stringsAsFactors = FALSE)\n\n\nReading layer `TM_WORLD_BORDERS_SIMPL-0.3' from data source \n  `/home/jeweljohnson/Work/R_distill_github/jeweljohnson.github.io/_posts/2022-01-17-the-world-happiness-report-2021/shp/TM_WORLD_BORDERS_SIMPL-0.3.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 246 features and 11 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -180 ymin: -90 xmax: 180 ymax: 83.57027\nGeodetic CRS:  WGS 84\n\n# load the dataset which you have downloaded\n# please change the location accordingly to where your file is\nhap_pre <- read.csv(paste0(getwd(),\"/datasets/world-happiness-report-2021.csv\"))\n\n# renaming column names of ease of use\ncolnames(hap_pre)[1] <- \"country\"\ncolnames(hap_pre)[3] <- \"score\"\n\n# selecting country and score columns\nhap <- hap_pre %>% select(country,score)\n# assigning ranks based on ladder score\nhap <- hap %>% mutate(rank = rank(-score))\n\n# checking which country names are a mismatch between map data and the downloaded dataset\n# this is an important check as we have to join the happiness dataset and shp file with country names\nanti_join(hap, world_spdf,  by = c(\"country\" = \"NAME\"))\n\n\n                     country score  rank\n1   Taiwan Province of China 6.584  24.0\n2                     Kosovo 6.372  33.0\n3                South Korea 5.845  62.0\n4                    Moldova 5.766  65.0\n5               North Cyprus 5.536  74.0\n6  Hong Kong S.A.R. of China 5.477  76.5\n7                    Vietnam 5.411  79.0\n8                      Libya 5.410  80.0\n9        Congo (Brazzaville) 5.342  83.0\n10               Ivory Coast 5.306  85.0\n11           North Macedonia 5.101  94.0\n12                      Laos 5.030 100.0\n13                      Iran 4.721 118.0\n14   Palestinian Territories 4.517 125.0\n15                   Myanmar 4.426 126.0\n16                  Tanzania 3.623 142.0\n\n# correcting country names, note that some countries are not available in the shp file\n# the list below are the ones that are available in the shp file\ncorrect_names <- c(\"Taiwan Province of China\" = \"Taiwan\",\n                   \"South Korea\" = \"Korea, Republic of\",\n                   \"Moldova\"  = \"Republic of Moldova\",\n                   \"Hong Kong S.A.R. of China\"= \"Hong Kong\",\n                   \"Vietnam\" = \"Viet Nam\",\n                   \"Congo (Brazzaville)\" = \"Congo\",\n                   \"Laos\" = \"Lao People's Democratic Republic\",\n                   \"Iran\" = \"Iran (Islamic Republic of)\",\n                   \"Palestinian Territories\" = \"Palestine\",\n                   \"Myanmar\" = \"Burma\",\n                   \"Tanzania\" = \"United Republic of Tanzania\")\n\n# recoding country names \nhap2 <- hap %>% mutate(country = recode(country, !!!correct_names))\n\n# the command below shows which countries are not joined\n# unfortunately we cannot add these countries unless we change the shp file\n# for now let us omit these countries\nanti_join(hap2, world_spdf,  by = c(\"country\" = \"NAME\"))\n\n\n          country score rank\n1          Kosovo 6.372   33\n2    North Cyprus 5.536   74\n3           Libya 5.410   80\n4     Ivory Coast 5.306   85\n5 North Macedonia 5.101   94\n\n# joining shp file and the happiness data\nworld_hap <-  left_join(world_spdf, hap2, by = c(\"NAME\" = \"country\"))\n\n#install.packages(\"leaflet\")\nlibrary(leaflet)\n\n# making colour palette for filling\nfill_col <- colorNumeric(palette=\"viridis\", domain=world_hap$score, na.color=\"transparent\")\n\n# Prepare the text for tooltips:\ntext <- paste(\n  \"Country: \", world_hap$NAME,\"<br/>\", \n  \"Score: \", world_hap$score, \"<br/>\", \n  \"Rank: \", world_hap$rank, \n  sep=\"\") %>%\n  lapply(htmltools::HTML)\n\n# plotting interactive map\nleaflet(world_hap) %>% \n  addTiles()  %>% \n  setView( lat=10, lng=0 , zoom=2) %>%\n  addPolygons( \n    fillColor = ~fill_col(score), \n    stroke=TRUE, \n    fillOpacity = 0.9, \n    color= \"grey\", \n    weight=0.3,\n    label = text,\n    labelOptions = labelOptions( \n      style = list(\"font-weight\" = \"normal\", padding = \"3px 8px\"), \n      textsize = \"13px\", \n      direction = \"auto\"\n    )\n  ) %>%\n  addLegend( pal=fill_col, values=~score, opacity=0.7, title = \"Score\", position = \"bottomleft\" )\n\n\n\n\nYou can download the .R script file for the above code here.\nPlotting a correlogram\nUsing the {ggstatsplot} package we can use the ggcorrmat() function to plot a correlation matrix showing correlations between the different variables in the dataset. We are interested to see out of the six variables chosen to calculate the happiness score, which variable might have strongly influenced the happiness score.\n\n\n#install.packages(\"ggcorrplot\")\n#install.packages(\"ggstatsplot\")\nlibrary(ggstatsplot)\n\n# load the dataset which you have downloaded\n# please change the location accordingly to where your file is\nhap_pre <- read.csv(paste0(getwd(),\"/datasets/world-happiness-report-2021.csv\"))\n\nhap_cor <- hap_pre %>% select(Ladder.score,\n                              Healthy.life.expectancy,\n                              Logged.GDP.per.capita,\n                              Social.support,\n                              Freedom.to.make.life.choices,\n                              Generosity,\n                              Perceptions.of.corruption)\n\naddline_format <- function(x,...){\n  gsub(',','\\n',x)}\n\nggcorrmat(\n  data     = hap_cor,\n  colors   = c(\"#FC4E07\",\"white\",\"#00AFBB\"),\n  title    = \"Correlogram for World Happiness Report 2021 dataset\",\n  caption  = addline_format(\"Source: World Happiness Report 2021,Visualization by Jewel Johnson\")\n)\n\n\n\n\nFrom the graph we can see that the happiness score is positively correlated against variables such as life expectancy, GDP per capita, social support and freedom to make life choices. Perceptions of corruptions is negatively correlated against happiness score which is expected. Surprisingly generosity variable does not seem to affect happiness score in countries.\nSummary\nI hope this post was helpful to you in understanding how to plot world maps in R. In short using {ggplot2} we have first plot a static world map using the data from The World Happiness Report 2021, then similarly using the {leaflet} and {sf} packages we plotted an interactive world map. Finally we plotted a correlogram using the {ggstatsplot} package to see which variables are correlated to happiness score.\nReferences\nH. Wickham. ggplot2: Elegant Graphics for Data Analysis. Springer-Verlag New York, 2016.\nJoe Cheng, Bhaskar Karambelkar and Yihui Xie (2021). leaflet: Create Interactive Web Maps with the JavaScript ‘Leaflet’ Library. R package version 2.0.4.1. https://CRAN.R-project.org/package=leaflet\nPebesma, E., 2018. Simple Features for R: Standardized Support for Spatial Vector Data. The R Journal 10 (1), 439-446, https://doi.org/10.32614/RJ-2018-009\nPatil, I. (2021). Visualizations with statistical details: The ‘ggstatsplot’ approach. Journal of Open Source Software, 6(61), 3167, doi:10.21105/joss.03167\nTutorial on plotting interactive maps in R.\nThe World Happiness Report\nSource for .csv file of World Happiness Score of countries 2021. Compiled by Ajaypal Singh in Kaggle.com.\nLast updated on\n\n[1] \"2022-01-20 10:20:45 IST\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "preview": "posts/2022-01-17-the-world-happiness-report-2021/the-world-happiness-report-2021_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2022-05-18T16:55:34+05:30",
    "input_file": {},
    "preview_width": 1728,
    "preview_height": 960
  },
  {
    "path": "posts/2021-12-18-quality-of-life-modifications-for-your-distill-webistes/",
    "title": "Quality of life modifications for your distill websites",
    "description": "In this post, you can find simple but useful enhancements that can be applied to your distill website. From enhancing your table of contents tab to adding a 'copy to clipboard button' in source code chunks, learn how you can make your distill website even more awesome!",
    "author": [
      {
        "name": "Jewel Johnson",
        "url": "https://jeweljohnsonj.github.io/jeweljohnson.github.io/"
      }
    ],
    "date": "2021-12-19",
    "categories": [
      "distill"
    ],
    "contents": "\n\nContents\nQuality of life mods for distill websites\n1. Making the table of contents more useful\n2. Adding a visitor counter\n3. Adding next/previous button\n4. Having social media share buttons\n5. Adding last updated date in the appendix\n6. Displaying your twitter feed\n7. Changing overflow to contain elements within the article body\n8. Copy to clipboard button in source code chunks\nSummary\nLast updated on\nAcknowledgments\nReferences\n\n\n\n\n\n\n\nQuality of life mods for distill websites\nIn my one month time of learning about the distill r-package, I was fascinated by how amazing it is. Without knowing much about HTML or CSS coding, using the distill package, one can build a website from scratch. What was even more amazing was that the package had an active and friendly community who have written excellent and easy to follow tutorials aiming at beginners like me. Almost everything I know about the distill package was thanks to these tutorials. Along the way, I also learned how to implement a few interesting features that can make a distill website even better. As a thank you for all the help I have received from this community, I would like to share some of my findings that might prove useful. Most of these findings are born out of curiosity coupled with Google search and from the source codes of the brilliant websites featured in the distill website showcase.\n1. Making the table of contents more useful\nIf you had used the Rmarkdown package for making websites before you began using the distill package, one thing you will immediately appreciate is the ‘table of contents (toc)’ in Rmarkdown. I feel that the toc in Rmarkdown is better than the toc in distill. The purpose of a toc is for enabling quick navigation through the contents of an article via the headers, so the toc should always be accessible to the reader. In distill articles, however, because of the way they manage the layout of the figures and other elements, a floating toc that is fixed even when the page is scrolled down is not possible out of the box. This issue has been raised in GitHub and hopefully, the developers will find an elegant way to reimagine the toc. Nevertheless, all is not lost, from a stack overflow question on having a floating fixed toc for distill articles, the answer by Dr Rich Pauloo provides relief. The code provided by Dr Pauloo allows the toc to be fixed on the left side even when you scroll down the page. But the down side is that by doing so, the toc will overlap over any element which is extending over the body layout. Also, the default font for the toc in distill is too small I feel, so if you increase the font size while using this code, it will create even more overlapping. So what can be done?\nOne thing I thought of implementing was that I will use the code by Dr Pauloo and fix the toc on top-left but with a transparent background. But when I hover over the toc headers it should zoom in on the screen, making the font bigger but over a white background, so that it is more legible. I used white colour as that was my background colour in the article body. I also changed the scrolling behaviour from ‘smooth’ to ‘auto’ as it made navigating via toc snappier and more responsive.\nIf you are adamant about having a fixed toc like me then you just have to tolerate the overlap problem. Another issue is that by using this code, when your website is viewed on mobile devices, the toc overlaps with the main text. But apart from that, I did not find any other major issues. The modified code is given below.\nEither insert the code below to your main theme CSS file, if you are using a custom theme for your distill website. Otherwise, insert the code in a separate .css file and insert it in the article where you want to implement this feature.\n\nhtml {\n  scroll-behavior: auto;\n}\nd-article {\n    contain: none;\n}\n\n/* the value in left: will allow you to change the left edge gap */\n/* try using the value I have provided and check if the text goes beyond */\n/* the edge of the screen when you hover over using the mouse pointer */\n/* otherwise modify the values till you get a desirable result */\n\n#TOC {\n  position: fixed;\n  z-index: 50;\n  background: none; /* makes the toc background layer transparent */    \n  left: 1.5em; /* changes the left edge gap */\n  top: 6em; /* changes the top edge gap */\n}\n\n.d-contents nav a:hover {\n    color: black;\n    transform: scale(1.7); /* change scale to control hover zoom, now it is in 1:7 ratio */\n    padding-left:20%; /* change percentage value to control left gap during hover */\n    background-color: white; /* background colour on hover, kept as white as it is my bg colour */\n    display: block; /* keep it as block to station the text on hover */\n}\n\n/* Hide the ToC when resized to mobile or tablet:  480px, 768px, 900px */\n@media screen and (max-width: 900px) {\n#TOC {\n    position: relative;\n  }\n}\n\nFor inserting multiple CSS files use the following code.\n\n---\ntitle: \"Untitled\"\ndate: \"`r Sys.Date()`\"\noutput: distill::distill_article\ncss: [style.css, hover.css] #the hover.css file will be containing the above modified code\n---\n\nIf done properly, you will have a toc just like mine, which is shown on the left side of this page. If you come across any problems while implementing this feature please put them as a comment below this article. I will do my best to solve them.\n2. Adding a visitor counter\nIf you fancy a visitor counter on your website and additionally you would also like to know information like the location data of your visitors, how many people are currently online viewing your website etc. then you can add an HTML widget to your page which shows the visitor count. This can be done by following the steps below.\nVisit https://www.freecounterstat.com/ and click on ‘originals’. I chose this website as it requires no annoying sign-in or account creation. Plus it is a free service.\n\n\n\nFigure 1: Figure from the Front page of https://www.freecounterstat.com/\n\n\n\nPick the theme you like and customize the widget till you are content. Add relevant details like location, category of your website etc and remember to pick the ‘standard’ layout if you want the counter to be displayed horizontally. The difference between hit counter and visitor counter is that the hit counter only tracks visits for the page it is installed on whereas the visitor counter tracks all users who have visited any of your pages on your website. So select the ‘visitor counter’. You can either make the stats public or private, choose public as it also allows the readers to see your visitor data. Then finally prove that ‘you are not a robot’ and press ‘submit query’.\n\n\n\nFigure 2: Customizing your widget, Figure from the Front page of https://www.freecounterstat.com/\n\n\n\nThe first code shown inside the red rectangle in the figure below has a javascript code that allows you to access various interesting information about the visitors to your webpage. Copy the first code.\n\n\n\nFigure 3: The code for the visitor counter widget, Figure from https://www.freecounterstat.com/\n\n\n\nInsert the copied code which displays the widget in your distill article of liking. For example, the code below will place the counter in the centre of the distill article and will have ‘visitors’ written above it. Paste the code that you have copied between the <center> tags. You can take a look at my file for reference. If done properly you will have the visitor counter widget placed in the centre position like in this page.\n<center>Visitors<center>\n<center>\n/* paste the code you copied here */\n<\/div><center>\n3. Adding next/previous button\nIf you are making a tutorial and have sequential sections or chapters, then you might need navigation buttons at the end of each chapter for easy navigation. In the picture below you can see that I used it for my R tutorial articles. Have a look at my file for reference.\n\n\n\nFigure 4: Source: https://jeweljohnsonj.github.io/jeweljohnson.github.io/project1.html\n\n\n\nUse the following code inside your distill article to get navigation buttons at the end of your page. Change the href values to your respective html files and change the text accordingly for right and left sided buttons. Insert the code given below at the end of your article.\n<br> \n\n<a href=\"project3.html\" class=\"btn button_round\" style=\"float: right;\">Next chapter:\n<br> 3. Even more customizations in ggplot2<\/a>\n\n<a href=\"project1.html\" class=\"btn button_round\" style=\"float: left;\">Previous chapter:\n<br> 1. Data visualization using ggplot2<\/a>\nYou should also add the following code to your main CSS theme file. You can change the values in the code to modify the button as you like.\n\n/* next and previous buttons at the end of the article */\n\n.btn {\n  border: none; /* button border */\n  background-color: #000000; /* button background colour */\n  padding: 14px 28px; /* length and width of the button */\n  font-size: 16px; /* font size of text inside the button */\n  cursor: pointer;\n  display: inline-block;\n}\n\n.button_round {border-radius: 12px;} /* makes the button round */\n\n4. Having social media share buttons\nYou can display social media share buttons for enabling easy sharing of your articles, like what I have, on the right side of this webpage.\nVisit https://www.addtoany.com/buttons/for/website and fill up the relevant details and get your html code. The reason for choosing this website over others was that you could use their service for free without signing up for an account.\nThen simply paste that code directly anywhere in your distill article to enable the share buttons.\nHave a look at my file for reference.\n\n\n\nFigure 5: Source: https://www.addtoany.com/buttons/for/website\n\n\n\n5. Adding last updated date in the appendix\nShowing when your article was last updated can prove useful for returning visitors. As it will allow them to see that the article has been modified. You can include this information in the appendix using the code below. Insert this code directly to your distill article.\n## Last updated on {.appendix}\n```{r,echo=FALSE}\nSys.time()\n```\nNow, this might not be very elegant, but it gets the job done in just one line of code. There is a more elegant way of including the “last updated date” in the appendix as explained by Dr Danielle Navarro. You can read more about it here. But it requires setting up a few prerequisites.\n6. Displaying your twitter feed\nIf you want to display your tweet activity on your webpage then follow the steps below.\nFirst go to your Twitter profile and copy your Twitter profile link address. Then visit https://publish.twitter.com/#. Your profile link would look like this -> 'https://twitter.com/[YOUR TWITTER USERNAME]\nPaste the link that you have copied on the input bar and press enter.\nSelect the ‘embedded timeline’ for showcasing the live feed of your Twitter activity and then copy the HTML widget code.\nNow you can insert the code directly anywhere on any distill page. When done correctly you will get your own widget like mine as shown below.\nTweets by jeweljohnsonj\nI placed my Twitter feed on the blog page where my posts are listed. By following the guide from the distill package tutorial, which allows one to add custom HTML files to the side section of a page, I was able to place the twitter feed on the right side of my blog page.\nTo do the same, first, open a text file in R Studio and using the template code below, paste the HTML code that you copied between the <div> tags in the code.\n<div class=\"sidebar-section custom\">\n  <!--place the code here -->\n \n<\/div>\nThen save the file as twitter.html (or in any name you like but save it as an HTML file) and then include it in the distill blog list page by modifying your collection section in your _site.yml file, like shown below.\n\n\ncollections:\n  posts:\n    custom: twitter.html #the html file containing the twitter feed widget code, add this code\n\n\n\nHave a look at my file for reference. If done properly you are now the proud owner of a Twitter feed widget in your distill website. Good job!\n7. Changing overflow to contain elements within the article body\nSometimes you will have text in your code chunks that will go over the boundary of your article body. This is especially true if you add comments to your codes in the code chunks. You can see in the picture below, the earlier version of this page that you are viewing did not have the text contained within the article body, which made it messy to read at one time. But fear not! you can use the overflow property in CSS to fix this issue. When properly implemented it will convert the code chunks containing long text into a scrollable window chunk. Add the code below to your main CSS theme file. This code was inspired by the source codes of Dr Joel Nitta’s website.\n\n/* making code chunks with scroll bar */\n\n/* the code below will change output chunk properties */\nd-article pre { \n  border-radius: 5px; /* rounded chunk window*/\n  font-size: 12px; /* output text size */\n  color: black; /* output text colour */\n  background-color: #F5F5F5; /* output chunk background colour */\n  padding: 5px 5px 5px 18px; /* top,right,bottom,left padding values */\n  overflow: auto !important; /* enables scroll bar */ \n}\n\n/* the code below will change source code chunk properties */\nd-article div.sourceCode pre { \n  border-radius: 5px;\n  background-color: #F8F8FF;\n  color: black;\n  padding: 5px 5px 5px 18px;\n  overflow: auto !important;\n}\n\n\n\nBefore overflow change\n\nBefore changing the overflow property, the comments in the code chuks overflowed the article body\n\n\n\n\nFigure 6: Earlier version of this page\n\n\n\nAfter overflow change\n\nAfter changing the overflow property, the comments in the code chunks are contained inside the code chunk via a scrollable window.\n\n\n\n\nFigure 7: Current version of this page\n\n\n\n\n\n8. Copy to clipboard button in source code chunks\nGone are the days of dragging your mouse pointer to select text. A copy to clipboard button on your source code chunk will make everyone’s life easy by allowing one to copy the whole code in the chunk window with a single click. This is extremely useful if you are making tutorial articles or learning materials for a course, where there is a high chance that students will want to copy and use your code. So for implementing the copy to clipboard button, follow the steps below.\nYou will need the xaringanExtra and htmltools packages installed in your R library to make this work. If you have not installed the packages then run the code shown below.\n\n\n# install.packages(\"devtools\")\ndevtools::install_github(\"gadenbuie/xaringanExtra\")\ninstall.packages(\"htmltools\")\n\n\n\nThen simply insert the code shown below directly to anywhere in your distill article. If you want to customize your icons then visit https://fontawesome.com/v4.7/icons/ and choose the icon of your liking, then change fa-ICON NAME in the code below. For example, changing ‘fa-clone’ to ‘fa-coffee’ will give a coffee cup icon as the ‘copy to clipboard button’. Also change the hex code in color: to the colour of your liking. If done properly you will see a ‘copy’ button on the top-right position of your source code chunk.\n```{r, xaringanExtra-clipboard, echo=FALSE}\nhtmltools::tagList(\n  xaringanExtra::use_clipboard(\n    button_text = \"<i class=\\\"fa fa-clone fa-2x\\\" style=\\\"color: #301e64\\\"><\/i>\",\n    success_text = \"<i class=\\\"fa fa-check fa-2x\\\" style=\\\"color: #90BE6D\\\"><\/i>\",\n    error_text = \"<i class=\\\"fa fa-times fa-2x\\\" style=\\\"color: #F94144\\\"><\/i>\"\n  ),\n  rmarkdown::html_dependency_font_awesome()\n)\n```\nSummary\nSo in short in this article we have learned;\nHow to modify the toc to have it fixed on the left side and zoom in on hover\nHow to add a visitor counter\nHow to add navigation buttons at the end of the page\nHow to add social media share buttons\nHow to add last updated date of a article in the appendix\nHow to display your Twitter feed on your distill website\nHow to add a scrolling code chunk window\nHow to add a copy to clipboard button in source code chunks\nI hope this was useful and in case you come across some problem while implementing these features, please specify them in the comments. I will try my best to fix them. In case if anyone is wondering how I was able to make panel sets within this webpage just follow this amazing tutorial guide. They are features from the xaringanExtra r-package. Thanks!\nLast updated on\n\n[1] \"2021-12-21 13:49:08 IST\"\n\nAcknowledgments\nI would like to thank Awanti Shastri for taking her valuable time to proofread this article. I also appreciate the valuable feedback and suggestions she gave for this article.\nReferences\nThe stackoverflow question on fixed toc in distill articles: https://stackoverflow.com/questions/67323162/floating-toc-in-distill-for-r/67387516?noredirect=1#comment119140135_67387516\nVisiter counter source: https://www.freecounterstat.com/\nSocial media share buttons source: https://www.addtoany.com/buttons/for/website\nTwitter feed widget source: https://publish.twitter.com/#\nFor changing the icons visit: https://fontawesome.com/v4.7/icons/\nFor implementing panelsets in distill articles: https://pkg.garrickadenbuie.com/xaringanExtra/#/panelset\nJJ Allaire, Rich Iannone, Alison Presmanes Hill and Yihui Xie (2021). distill: ‘R Markdown’ Format for Scientific and Technical Writing. R package version 1.3. https://CRAN.R-project.org/package=distill\nGarrick Aden-Buie and Matthew T. Warkentin (2021). xaringanExtra: Extras And Extensions for Xaringan Slides. R package version 0.5.5. https://github.com/gadenbuie/xaringanExtra\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "preview": "posts/2021-12-18-quality-of-life-modifications-for-your-distill-webistes/meme.gif",
    "last_modified": "2022-05-18T16:55:34+05:30",
    "input_file": {}
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to One-carat Blog!",
    "description": "Welcome to One-carat Blog! Get to know the story behing this blog's creation.",
    "author": [
      {
        "name": "Jewel Johnson",
        "url": "https://jeweljohnsonj.github.io/jeweljohnson.github.io/"
      }
    ],
    "date": "2021-12-17",
    "categories": [
      "distill"
    ],
    "contents": "\nMaking of One-carat Blog\nMy name is Jewel Johnson and this is my story of how this blog was created. I wanted to have a space to share what I learned over time and that was one of the main reasons behind creating this blog. I will mostly write science articles that are focused on making complex information available to the public. Science communication is very important as it helps in making the public well informed about the advances in science. I am also an R enthusiast and therefore I will also be writing about R programming in this blog. I have already made tutorials describing how to use ggplot2, tidyr and dplyr packages in R for beginners. Overall this blog is still in its infancy and there is a lot of work to be done.\nHow was this blog made?\nI never thought that I will be making this blog when I started my venture to write science articles. Initially, I thought I will write articles on medium.com. But soon I scrapped that idea for two main reasons. The first reason was that The Medium is a paid and subscription-based service which will limit the reach of my articles. Most articles in the medium are mediocre and filled with click baits and is a waste of time. When I looked at some of the R programming articles in medium, most of them are plagiarized from the r-package websites and other tutorial websites. The second reason was medium is not a platform for writing coding oriented articles. There is no syntax support for programming languages and it is cumbersome to work with it. These reasons swayed me to look for alternatives.\nThe first choice was ‘blogger’ from Google, but again it was not an elegant solution. That is when I learned about markdown files and how you can build a website with them. Now a website or blog needs three things for it to work. It needs a hosting service, a domain address and content. You can always make content on your own, it is limited by the creator. But you will be mostly spending money on hosting services for physical storage and a domain address for making your website available online. Now money is a problem for me, at least right now. So this is when I learned that you can host your website using GitHub, which was just amazing.\nSo my journey began from using markdown and GitHub. But again markdown was not a very good choice for coding oriented articles. Also since I use R it is just cumbersome to copy-paste both the code as well as its output each and whenever I write some R code. But again all was not lost. From ‘markdown’, I began my journey to ‘Rmarkdown’. Now Rmarkdown was everything I wanted to have. So I had made my first website using the Rmarkdown package in R and hosted it in GitHub. But again as you get to know something well you will also understand its limitations. Rmarkdown is an easy to use package which can be used to make amazing pdf and HTML pages. But it had its limitations in customisations and other features. So after some research, I found two other packages in R which can serve my goal.\nThe first was the distill package in R. Now coming from Rmakrdown to distill I soon began to appreciate its features. Distill is like the savvy sibling of Rmarkdown, which offered a lot of features out of the box and had an active developer community. The second package I learned about was blogdown. Now, blogdown has everything you can ask for while making a website. The websites created using the blogdown package was top-notch and professional but it was heavily dependent on a third-party service called Hugothemes. This made me select distill over blogdown and I have been enjoying the distill package very much. Also distill was first published just two years ago. It has miles to go in terms of improvements but has high potential. I began learning about distill package on Nov 26, 2021, and since then I have been working on improving my blog using it. I want to thank the wonderful team behind the development of the distill r-package and I also offer my gratitude to GitHub which is offering free hosting services which I am sure is very helpful to students like me.\nMy vision\nI want to use this blog to showcase my skills and promote science communication. I will be writing about some amazing research and advancements in the science community. I am confident that the skillet I garnered overtime for these efforts will surely help me for PhD in the future. With that, I warmly welcome you to my blog and I hope you have as much fun reading these articles, as I had while creating these articles. If you find some articles helpful and you can share them with your friends who might enjoy them as much as you did. This blog has no ads so it is a perfect place for reading. I will strive to put forward high-quality articles as I respect your time as a reader. Thanks for visiting and I wish you the best!\nLast updated on\n\n[1] \"2021-12-21 11:06:21 IST\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "preview": "posts/welcome/proud_of_you.gif",
    "last_modified": "2022-05-18T16:55:34+05:30",
    "input_file": {}
  }
]
